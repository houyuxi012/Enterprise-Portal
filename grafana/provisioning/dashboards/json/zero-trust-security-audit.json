{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "description": "Èõ∂‰ø°‰ªªÊû∂ÊûÑ‰∏ãÁöÑË∫´‰ªΩÂÆâÂÖ®‰∏éÂÖ®ÈìæË∑ØÂÆ°ËÆ°ÁõëÊéßÔºåË¶ÜÁõñ IAM„ÄÅAI„ÄÅKB„ÄÅÊó•ÂøóÊ≤ªÁêÜ‰∏éÂæÖÂäû‰∏öÂä°ÂÅ•Â∫∑„ÄÇ",
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": null,
  "links": [],
  "liveNow": false,
  "panels": [
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 100,
      "panels": [],
      "title": "üõ°Ô∏è Èõ∂‰ø°‰ªªÊ†∏ÂøÉÊÄÅÂäøÔºàËøë 1 Â∞èÊó∂Ôºâ",
      "type": "row"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "loki"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 1
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 0,
        "y": 1
      },
      "id": 1,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "sum(count_over_time({job=\"enterprise-portal\", log_type=\"ACCESS\"} | json | path=\"/api/iam/auth/admin/token\" | status_code >= 400 [1h]))",
          "refId": "A"
        }
      ],
      "title": "Admin ÁôªÂΩïÂ§±Ë¥•",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "loki"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 1
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 4,
        "y": 1
      },
      "id": 2,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "sum(count_over_time({job=\"enterprise-portal\", log_type=\"ACCESS\"} | json | path=\"/api/iam/auth/portal/token\" | status_code >= 400 [1h]))",
          "refId": "A"
        }
      ],
      "title": "Portal ÁôªÂΩïÂ§±Ë¥•",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "loki"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "orange",
                "value": 1
              },
              {
                "color": "red",
                "value": 10
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 8,
        "y": 1
      },
      "id": 3,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "sum(count_over_time({job=\"enterprise-portal\", log_type=\"IAM\"} | json | action=\"AUTHZ_DENIED\" [1h]))",
          "refId": "A"
        }
      ],
      "title": "ÊùÉÈôêÊãíÁªù AUTHZ_DENIED",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "loki"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "orange",
                "value": 1
              },
              {
                "color": "red",
                "value": 5
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 12,
        "y": 1
      },
      "id": 4,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "sum(count_over_time({job=\"enterprise-portal\", log_type=\"AI\"} | json | status=~\"BLOCKED|ERROR|FAIL|TIMEOUT\" [1h]))",
          "refId": "A"
        }
      ],
      "title": "AI Êã¶Êà™/ÈîôËØØ",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "loki"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "orange",
                "value": 1
              },
              {
                "color": "red",
                "value": 3
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 16,
        "y": 1
      },
      "id": 5,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "sum(count_over_time({job=\"enterprise-portal\", log_type=\"ACCESS\"} | json | status_code >= 500 [1h]))",
          "refId": "A"
        }
      ],
      "title": "HTTP 5xx",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "red",
                "value": null
              },
              {
                "color": "green",
                "value": 1
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 20,
        "y": 1
      },
      "id": 6,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT COUNT(*) AS value FROM log_forwarding_config WHERE enabled = true;"
        }
      ],
      "title": "Â§ñÂèëÂêØÁî®ÁõÆÊ†áÊï∞",
      "type": "stat"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 5
      },
      "id": 101,
      "panels": [],
      "title": "üîê Ë∫´‰ªΩËÆ§ËØÅ‰∏éÊùÉÈôêÊî∂Êïõ",
      "type": "row"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "loki"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 6
      },
      "id": 11,
      "options": {
        "legend": {
          "calcs": [
            "sum"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "sum(count_over_time({job=\"enterprise-portal\", log_type=\"ACCESS\"} | json | path=\"/api/iam/auth/admin/token\" | status_code = 200 [5m]))",
          "legendFormat": "Admin Login Success",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "sum(count_over_time({job=\"enterprise-portal\", log_type=\"ACCESS\"} | json | path=\"/api/iam/auth/admin/token\" | status_code >= 400 [5m]))",
          "legendFormat": "Admin Login Fail",
          "refId": "B"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "sum(count_over_time({job=\"enterprise-portal\", log_type=\"ACCESS\"} | json | path=\"/api/iam/auth/portal/token\" | status_code = 200 [5m]))",
          "legendFormat": "Portal Login Success",
          "refId": "C"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "sum(count_over_time({job=\"enterprise-portal\", log_type=\"ACCESS\"} | json | path=\"/api/iam/auth/portal/token\" | status_code >= 400 [5m]))",
          "legendFormat": "Portal Login Fail",
          "refId": "D"
        }
      ],
      "title": "ÂèåÂÖ•Âè£ÁôªÂΩïË∂ãÂäøÔºà5mÔºâ",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "loki"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 6
      },
      "id": 12,
      "options": {
        "legend": {
          "calcs": [
            "sum"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "desc"
        }
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "sum(count_over_time({job=\"enterprise-portal\", log_type=\"IAM\"} | json | action=\"AUTHZ_DENIED\" [5m]))",
          "legendFormat": "AUTHZ_DENIED",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "sum(count_over_time({job=\"enterprise-portal\", log_type=\"IAM\"} | json | action=\"iam.login.fail\" [5m]))",
          "legendFormat": "iam.login.fail",
          "refId": "B"
        }
      ],
      "title": "ÊùÉÈôêÊãíÁªù‰∏éÂ§±Ë¥•ÁôªÂΩïË∂ãÂäø",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 0,
        "y": 14
      },
      "id": 13,
      "options": {
        "footer": {
          "enablePagination": true,
          "show": false
        },
        "showHeader": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT operator AS \"Áî®Êà∑\", COUNT(*) AS \"ÊãíÁªùÊ¨°Êï∞\"\nFROM business_logs\nWHERE domain = 'IAM'\n  AND action = 'AUTHZ_DENIED'\n  AND timestamp::timestamptz >= NOW() - INTERVAL '24 hours'\nGROUP BY operator\nORDER BY \"ÊãíÁªùÊ¨°Êï∞\" DESC\nLIMIT 20;"
        }
      ],
      "title": "Ëøë 24h ÊùÉÈôêÊãíÁªù Top Áî®Êà∑",
      "type": "table"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "loki"
      },
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 12,
        "y": 14
      },
      "id": 14,
      "options": {
        "dedupStrategy": "none",
        "enableLogDetails": true,
        "prettifyLogMessage": true,
        "showCommonLabels": false,
        "showLabels": false,
        "showTime": true,
        "sortOrder": "Descending",
        "wrapLogMessage": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "{job=\"enterprise-portal\", log_type=\"IAM\"}",
          "refId": "A"
        }
      ],
      "title": "IAM ÂÆ°ËÆ°Êó•ÂøóÊµÅ",
      "type": "logs"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 21
      },
      "id": 102,
      "panels": [],
      "title": "ü§ñ AI ‰∏éÊú¨Âú∞Áü•ËØÜÂ∫ìËøêË°åË¥®Èáè",
      "type": "row"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 0,
        "y": 22
      },
      "id": 21,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT COALESCE(ROUND(100.0 * SUM(CASE WHEN status = 'SUCCESS' THEN 1 ELSE 0 END) / NULLIF(COUNT(*), 0), 2), 0) AS value\nFROM ai_audit_log\nWHERE ts >= NOW() - INTERVAL '24 hours';"
        }
      ],
      "title": "AI ÊàêÂäüÁéáÔºà24hÔºâ",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 4,
        "y": 22
      },
      "id": 22,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT COALESCE(ROUND(100.0 * SUM(CASE WHEN hit_level = 'miss' THEN 1 ELSE 0 END) / NULLIF(COUNT(*), 0), 2), 0) AS value\nFROM kb_query_logs\nWHERE created_at >= NOW() - INTERVAL '24 hours';"
        }
      ],
      "title": "KB Miss ÁéáÔºà24hÔºâ",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 8,
        "y": 22
      },
      "id": 35,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT COUNT(*) AS value FROM todos WHERE priority = 1 AND status IN ('pending', 'in_progress');"
        }
      ],
      "title": "Á¥ßÊÄ•ÂæÖÂäûÔºàËøõË°å‰∏≠Ôºâ",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 12,
        "y": 22
      },
      "id": 36,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT COUNT(*) AS value FROM todos WHERE due_at < NOW() AND status IN ('pending', 'in_progress');"
        }
      ],
      "title": "ÈÄæÊúüÂæÖÂäûÔºàËøõË°å‰∏≠Ôºâ",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 16,
        "y": 22
      },
      "id": 37,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT COUNT(*) AS value FROM ai_providers WHERE is_active = true;"
        }
      ],
      "title": "ÊøÄÊ¥ªÊ®°ÂûãÊï∞",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 20,
        "y": 22
      },
      "id": 38,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT COUNT(*) AS value FROM kb_documents WHERE status = 'ready';"
        }
      ],
      "title": "KB Ready ÊñáÊ°£Êï∞",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 26
      },
      "id": 23,
      "options": {
        "legend": {
          "calcs": [
            "sum"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "time_series",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT\n  $__timeGroupAlias(ts, '5m'),\n  COUNT(*) FILTER (WHERE status = 'SUCCESS') AS \"SUCCESS\",\n  COUNT(*) FILTER (WHERE status = 'BLOCKED') AS \"BLOCKED\",\n  COUNT(*) FILTER (WHERE status = 'ERROR') AS \"ERROR\"\nFROM ai_audit_log\nWHERE $__timeFilter(ts)\nGROUP BY 1\nORDER BY 1;"
        }
      ],
      "title": "AI Ë∞ÉÁî®Áä∂ÊÄÅË∂ãÂäø",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 26
      },
      "id": 24,
      "options": {
        "legend": {
          "calcs": [
            "sum"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "time_series",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT\n  $__timeGroupAlias(created_at, '15m'),\n  COUNT(*) FILTER (WHERE hit_level = 'strong') AS \"strong\",\n  COUNT(*) FILTER (WHERE hit_level = 'weak') AS \"weak\",\n  COUNT(*) FILTER (WHERE hit_level = 'miss') AS \"miss\"\nFROM kb_query_logs\nWHERE $__timeFilter(created_at)\nGROUP BY 1\nORDER BY 1;"
        }
      ],
      "title": "KB Ê£ÄÁ¥¢ÂëΩ‰∏≠Ë∂ãÂäø",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 34
      },
      "id": 25,
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "right",
          "showLegend": false
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT model AS \"model\", SUM(COALESCE(tokens_in, 0) + COALESCE(tokens_out, 0)) AS \"tokens\"\nFROM ai_audit_log\nWHERE $__timeFilter(ts)\nGROUP BY model\nORDER BY \"tokens\" DESC\nLIMIT 10;"
        }
      ],
      "title": "Ê®°Âûã Token Áî®Èáè Top",
      "type": "barchart"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 34
      },
      "id": 26,
      "options": {
        "footer": {
          "enablePagination": true,
          "show": false
        },
        "showHeader": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT ts AS \"Êó∂Èó¥\", COALESCE(provider, '-') AS \"‰æõÂ∫îÂïÜ\", COALESCE(model, '-') AS \"Ê®°Âûã\", status AS \"Áä∂ÊÄÅ\", COALESCE(error_code, '-') AS \"ÈîôËØØÁ†Å\", LEFT(COALESCE(error_reason, '-'), 180) AS \"ÈîôËØØÂéüÂõ†\", COALESCE(trace_id, '-') AS \"trace_id\"\nFROM ai_audit_log\nWHERE status IN ('BLOCKED', 'ERROR', 'TIMEOUT')\n  AND $__timeFilter(ts)\nORDER BY ts DESC\nLIMIT 50;"
        }
      ],
      "title": "AI ÂºÇÂ∏∏Ê†∑Êú¨",
      "type": "table"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 42
      },
      "id": 103,
      "panels": [],
      "title": "üóÇÔ∏è Êó•ÂøóÁîüÂëΩÂë®ÊúüÊ≤ªÁêÜ‰∏éËøêÁª¥ÂèØËßÇÊµã",
      "type": "row"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 8,
        "x": 0,
        "y": 43
      },
      "id": 31,
      "options": {
        "showHeader": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT key AS \"ÈÖçÁΩÆÈ°π\", value AS \"ÂÄº(Â§©)\"\nFROM system_config\nWHERE key IN (\n  'log_retention_access_days',\n  'log_retention_system_days',\n  'log_retention_business_days',\n  'log_retention_ai_days',\n  'log_retention_iam_days'\n)\nORDER BY key;"
        }
      ],
      "title": "Êó•Âøó‰øùÁïôÁ≠ñÁï•",
      "type": "table"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 8,
        "x": 8,
        "y": 43
      },
      "id": 32,
      "options": {
        "legend": {
          "displayMode": "hidden",
          "placement": "bottom",
          "showLegend": false
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "time_series",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT\n  $__timeGroupAlias(timestamp::timestamptz, '1h'),\n  COUNT(*) AS value\nFROM business_logs\nWHERE domain = 'SYSTEM'\n  AND action = 'AUTO_LOG_CLEANUP'\n  AND $__timeFilter(timestamp::timestamptz)\nGROUP BY 1\nORDER BY 1;"
        }
      ],
      "title": "Ëá™Âä®Ê∏ÖÁêÜ‰ªªÂä°ÊâßË°åË∂ãÂäø",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "postgres"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 8,
        "x": 16,
        "y": 43
      },
      "id": 33,
      "options": {
        "showHeader": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "postgres"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "refId": "A",
          "sql": "SELECT id AS \"ID\", type AS \"Á±ªÂûã\", endpoint AS \"ÁõÆÊ†á\", enabled AS \"ÂêØÁî®\", COALESCE(log_types, '[]') AS \"Êó•ÂøóÁ±ªÂûã\"\nFROM log_forwarding_config\nORDER BY id DESC;"
        }
      ],
      "title": "Êó•ÂøóÂ§ñÂèëÈÖçÁΩÆÁä∂ÊÄÅ",
      "type": "table"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "loki"
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 50
      },
      "id": 34,
      "options": {
        "dedupStrategy": "none",
        "enableLogDetails": true,
        "prettifyLogMessage": true,
        "showCommonLabels": false,
        "showLabels": false,
        "showTime": true,
        "sortOrder": "Descending",
        "wrapLogMessage": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "expr": "{job=\"enterprise-portal\", log_type=\"ACCESS\"} | json | status_code >= 400",
          "refId": "A"
        }
      ],
      "title": "ÂºÇÂ∏∏ËÆøÈóÆÊó•ÂøóÊµÅÔºà4xx/5xxÔºâ",
      "type": "logs"
    }
  ],
  "refresh": "30s",
  "schemaVersion": 39,
  "tags": [
    "enterprise-portal",
    "zero-trust",
    "iam",
    "audit",
    "ai",
    "kb"
  ],
  "templating": {
    "list": []
  },
  "time": {
    "from": "now-24h",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "browser",
  "title": "Èõ∂‰ø°‰ªªÂÆâÂÖ®‰∏éÂÆ°ËÆ°ÊÄªËßà",
  "uid": "zero-trust-security-audit",
  "version": 2,
  "weekStart": ""
}
