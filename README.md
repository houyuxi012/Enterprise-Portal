# ShiKu Home - Next-Gen Enterprise Portal

> æ–°ä¸€ä»£ä¼ä¸šçº§å†…ç½‘é—¨æˆ·ç³»ç»Ÿï¼Œé‡‡ç”¨ React 18 + FastAPI + PostgreSQL + MinIO æ„å»ºï¼Œæä¾›ç°ä»£åŒ–ã€é«˜æ€§èƒ½ã€ç¾è§‚çš„æ•°å­—åŒ–åŠå…¬ä½“éªŒã€‚

ShiKu Home ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå¯¼èˆªé¡µï¼Œå®ƒæ˜¯ä¸€ä¸ªé›†æˆäº†åº”ç”¨ç®¡ç†ã€ç»„ç»‡æ¶æ„ã€æ—¥å¿—å®¡è®¡ã€å³æ—¶èµ„è®¯å’Œ AI åŠ©æ‰‹çš„å®Œæ•´ä¼ä¸šå·¥ä½œå°ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½ (Core Features)

### ğŸ–¥ï¸ ç”¨æˆ·é—¨æˆ· (User Portal)
- **ç°ä»£åŒ–ä»ªè¡¨ç›˜**: æç®€è®¾è®¡ï¼Œæä¾›å…¬å‘Šè½®æ’­ã€å¿«æ·åº”ç”¨ç½‘æ ¼ã€æœ€æ–°åŠ¨æ€èšåˆã€‚
- **åº”ç”¨ä¸­å¿ƒ (App Center)**: ç»Ÿä¸€ç®¡ç†ä¼ä¸šå†…éƒ¨å·¥å…·ï¼Œæ”¯æŒåˆ†ç±»ã€æœç´¢ä¸ä¸€é”®ç›´è¾¾ã€‚
- **å›¢é˜Ÿé€šè®¯å½•**: å¯è§†åŒ–ç»„ç»‡æ¶æ„æ ‘ï¼Œå¿«é€ŸæŸ¥æ‰¾åŒäº‹è”ç³»æ–¹å¼ã€‚
- **AI æ™ºèƒ½åŠ©æ‰‹**: é›†æˆ Google Gemini æ¨¡å‹ï¼Œæä¾›ä¼ä¸šçº§æ™ºèƒ½é—®ç­”æ”¯æŒã€‚

### ğŸ›¡ï¸ ç®¡ç†åå° (Admin Portal)
- **Premium Dashboard**: å…¨æ–°è®¾è®¡çš„ç»ç’ƒæ‹Ÿæ€ä»ªè¡¨ç›˜ï¼Œå®æ—¶ç›‘æ§ CPU/å†…å­˜/ç½‘ç»œèµ„æºä¸ä¸šåŠ¡æ•°æ®è¶‹åŠ¿ã€‚
- **ç»„ç»‡æ¶æ„ç®¡ç†**: å¯è§†åŒ–éƒ¨é—¨æ ‘ç®¡ç†ï¼Œæ”¯æŒæ— é™çº§éƒ¨é—¨åµŒå¥—ä¸å‘˜å·¥è°ƒå²—ã€‚
- **å…¨é“¾è·¯æ—¥å¿—å®¡è®¡**:
    - **ç³»ç»Ÿæ—¥å¿—**: ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ä¸å¼‚å¸¸å †æ ˆã€‚
    - **ç™»å½•å®¡è®¡**: è®°å½•æ‰€æœ‰ç™»å½•å°è¯• (User, IP, Device, Status)ï¼Œæ”¯æŒé˜²çˆ†ç ´æ£€æµ‹ã€‚
    - **æ—¥å¿—å¤–å‘**: æ”¯æŒ Syslog/Webhook å®æ—¶è½¬å‘è‡³ç¬¬ä¸‰æ–¹ SIEM å¹³å°ã€‚
- **å­˜å‚¨æœåŠ¡**:
    - **MinIO é›†æˆ**: æ”¯æŒå¯¹è±¡å­˜å‚¨ (S3 å…¼å®¹)ï¼Œç”¨äºå¤´åƒã€æ–‡ä»¶ã€å›¾ç‰‡çš„é«˜å¯ç”¨å­˜å‚¨ã€‚
    - **ç”Ÿäº§çº§å®‰å…¨**: æ–‡ä»¶ç±»å‹é­”æ•°æ ¡éªŒã€5MB å¤§å°é™åˆ¶ã€ç—…æ¯’æ‰«æé¢„ç•™ã€‚
- **èµ„è®¯å†…å®¹ç®¡ç†**: Premium é£æ ¼çš„æ–°é—»ã€å…¬å‘Šã€è½®æ’­å›¾ç®¡ç†ç•Œé¢ã€‚
- **ä¼ä¸šä¸ªæ€§åŒ– (Branding)**: æ”¯æŒè‡ªå®šä¹‰ Logoã€ç³»ç»Ÿåç§°ã€ç‰ˆæƒä¿¡æ¯ä¸æµè§ˆå™¨æ ‡é¢˜è®¾ç½®ã€‚
- **AI ç®¡ç†**: æ”¯æŒå¤š AI æœåŠ¡å•†é…ç½®ã€API Key åŠ å¯†å­˜å‚¨ã€å®‰å…¨ç­–ç•¥ç®¡ç†ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ (Tech Stack)

### Frontend (å‰å°)
- **æ¡†æ¶**: [React 18](https://react.dev/) + [Vite](https://vitejs.dev/)
- **UI ç»„ä»¶**: [Ant Design 5](https://ant.design/) (ä¸»è¦ç»„ä»¶) + [TailwindCSS](https://tailwindcss.com/) (æ ·å¼å¼•æ“)
- **å›¾æ ‡åº“**: [Lucide React](https://lucide.dev/)
- **æ•°æ®æµ**: Axios (withCredentials for HttpOnly Cookie Auth)
- **è®¾è®¡é£æ ¼**: Glassmorphism (ç»ç’ƒæ‹Ÿæ€), Modern Clean UI

### Backend (åå°)
- **æ¡†æ¶**: [FastAPI](https://fastapi.tiangolo.com/) (Python 3.10+)
- **æ•°æ®åº“**: [PostgreSQL 17](https://www.postgresql.org/)
- **ç¼“å­˜**: [Redis](https://redis.io/)
- **ORM**: [SQLAlchemy](https://www.sqlalchemy.org/) (AsyncIO) + [Pydantic](https://docs.pydantic.dev/)
- **è®¤è¯**: HttpOnly Cookie + JWT (Secure, SameSite=Lax)
- **åŠ å¯†**: Fernet å¯¹ç§°åŠ å¯† (ç”¨äº API Key å­˜å‚¨)

### Infrastructure (åŸºç¡€è®¾æ–½)
- **å®¹å™¨åŒ–**: Docker Compose
- **åå‘ä»£ç†**: Nginx (HTTPS, HSTS, Security Headers)
- **å¯¹è±¡å­˜å‚¨**: MinIO (S3 å…¼å®¹)
- **SSL**: è‡ªç­¾åè¯ä¹¦ (å¼€å‘) / Let's Encrypt (ç”Ÿäº§)

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

### æ–¹å¼ä¸€ï¼šDocker Compose å…¨æ ˆéƒ¨ç½² (æ¨è)

æœ€å¿«é€Ÿçš„å¯åŠ¨æ–¹å¼ï¼ŒåŒ…å«å‰ç«¯ã€åç«¯ã€æ•°æ®åº“ã€Redisã€MinIOï¼š

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd Enterprise\ Portal

# 2. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d --build

# 3. è®¿é—®ç³»ç»Ÿ
# å‰ç«¯: https://localhost (éœ€æ¥å—è‡ªç­¾åè¯ä¹¦è­¦å‘Š)
# åç«¯ API æ–‡æ¡£: https://localhost/api/docs
# MinIO Console: http://localhost:9001 (minioadmin/minioadmin@houyuxi)

# é»˜è®¤ç®¡ç†å‘˜: admin / 123456
```

> âš ï¸ **æ³¨æ„**: é¦–æ¬¡è®¿é—® `https://localhost` æ—¶ï¼Œæµè§ˆå™¨ä¼šæç¤ºè¯ä¹¦ä¸å—ä¿¡ä»»ã€‚è¿™æ˜¯é¢„æœŸè¡Œä¸ºï¼Œè¯·ç‚¹å‡»"é«˜çº§" â†’ "ç»§ç»­è®¿é—®"ã€‚

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘éƒ¨ç½² (Local Development)

é€‚ç”¨äºå¼€å‘è€…è¿›è¡ŒåŠŸèƒ½è¿­ä»£ã€‚

**å‰ææ¡ä»¶**:
- Python 3.10+
- Node.js 18+
- PostgreSQL (æœ¬åœ°å®‰è£…æˆ– Docker å¯åŠ¨)
- Redis

**1. å¯åŠ¨æ•°æ®åº“å’Œä¾èµ–æœåŠ¡**
```bash
docker-compose up -d db redis minio createbuckets
```

**2. å¯åŠ¨åç«¯**
```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

**3. å¯åŠ¨å‰ç«¯ (å¼€å‘æ¨¡å¼)**
```bash
cd frontend
npm install
npm run dev
```
å‰ç«¯å¼€å‘æœåŠ¡å™¨è¿è¡Œåœ¨ `http://localhost:3000`ï¼Œè‡ªåŠ¨ä»£ç† `/api` è¯·æ±‚åˆ°åç«¯ã€‚

## âš™ï¸ ç¯å¢ƒå˜é‡é…ç½® (Configuration)

### docker-compose.yml å…³é”®é…ç½®

```yaml
# Backend æœåŠ¡
backend:
  environment:
    DATABASE_URL: postgresql+asyncpg://user:password@db:5432/portal_db
    REDIS_URL: redis://redis:6379
    SECRET_KEY: "your-super-secret-key"
    CORS_ORIGINS: "http://localhost:3000,https://localhost,https://127.0.0.1"
    COOKIE_SECURE: "True"
    GEMINI_API_KEY: ${GEMINI_API_KEY}  # å¯é€‰ï¼Œç”¨äº AI åŠŸèƒ½
    STORAGE_TYPE: minio
    MINIO_ENDPOINT: minio:9000
    MINIO_ACCESS_KEY: minioadmin
    MINIO_SECRET_KEY: minioadmin@houyuxi

# Frontend æœåŠ¡ (æ„å»ºæ—¶æ³¨å…¥)
frontend:
  build:
    context: ./frontend
    args:
      VITE_API_BASE_URL: /api  # é‡è¦ï¼šå¿…é¡»ä¸º /api
```

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

åœ¨ `backend` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# åŸºç¡€é…ç½®
GEMINI_API_KEY=your_gemini_api_key
SECRET_KEY=your_jwt_secret_key

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql+asyncpg://user:password@localhost/portal_db
REDIS_URL=redis://localhost:6379

# Cookie é…ç½® (å¼€å‘ç¯å¢ƒ)
COOKIE_SECURE=False
COOKIE_DOMAIN=
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§ (Security Features)

- **HTTPS å¼ºåˆ¶**: Nginx è‡ªåŠ¨å°† HTTP é‡å®šå‘åˆ° HTTPS
- **å®‰å…¨å“åº”å¤´**: HSTS, X-Frame-Options, X-Content-Type-Options, X-XSS-Protection
- **HttpOnly Cookie**: JWT Token å­˜å‚¨åœ¨ HttpOnly Cookie ä¸­ï¼Œé˜²æ­¢ XSS
- **CORS ç™½åå•**: ä¸¥æ ¼é™åˆ¶å…è®¸çš„æº
- **API Key åŠ å¯†**: ä½¿ç”¨ Fernet å¯¹ç§°åŠ å¯†å­˜å‚¨æ•æ„Ÿå¯†é’¥
- **é™æµä¿æŠ¤**: Nginx å±‚ API é™æµ (10r/s, burst 20)
- **æ–‡ä»¶ä¸Šä¼ å®‰å…¨**: é­”æ•°æ ¡éªŒã€å¤§å°é™åˆ¶ã€ç±»å‹ç™½åå•

## ğŸ“ é¡¹ç›®ç»“æ„ (Project Structure)

```
Enterprise Portal/
â”œâ”€â”€ backend/                 # FastAPI åç«¯
â”‚   â”œâ”€â”€ routers/            # API è·¯ç”±
â”‚   â”œâ”€â”€ models.py           # SQLAlchemy æ¨¡å‹
â”‚   â”œâ”€â”€ utils.py            # å·¥å…·å‡½æ•° (åŠ å¯†ã€è®¤è¯)
â”‚   â””â”€â”€ main.py             # åº”ç”¨å…¥å£
â”œâ”€â”€ frontend/               # React å‰ç«¯
â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ components/         # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ services/           # API å®¢æˆ·ç«¯
â”‚   â””â”€â”€ index.html          # HTML å…¥å£
â”œâ”€â”€ nginx/                  # Nginx é…ç½®
â”‚   â”œâ”€â”€ nginx.conf          # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ certs/              # SSL è¯ä¹¦
â”œâ”€â”€ docker-compose.yml      # Docker ç¼–æ’
â””â”€â”€ README.md
```

## ğŸ“ License
MIT License Â© 2025 ä¾¯é’°ç†™ 
https://www.houyuxi.com
